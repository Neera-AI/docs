"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[959],{3905:function(e,t,n){n.d(t,{Zo:function(){return h},kt:function(){return d}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},p=Object.keys(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},h=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,p=e.originalType,l=e.parentName,h=o(e,["components","mdxType","originalType","parentName"]),c=s(n),d=i,m=c["".concat(l,".").concat(d)]||c[d]||u[d]||p;return n?a.createElement(m,r(r({ref:t},h),{},{components:n})):a.createElement(m,r({ref:t},h))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var p=n.length,r=new Array(p);r[0]=c;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,r[1]=o;for(var s=2;s<p;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8478:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return l},metadata:function(){return h},toc:function(){return u}});var a=n(7462),i=n(3366),p=(n(7294),n(3905)),r=n.p+"assets/images/felvin_arch-3208f888ccee8e3cfd8885781962b5c8.png",o=["components"],l={title:"Snippet Apps"},s="What?",h={unversionedId:"rfcs/snippet_apps",id:"rfcs/snippet_apps",isDocsHomePage:!1,title:"Snippet Apps",description:"<img",source:"@site/docs/rfcs/snippet_apps.mdx",sourceDirName:"rfcs",slug:"/rfcs/snippet_apps",permalink:"/rfcs/snippet_apps",editUrl:"https://github.com/felvin-search/docs/edit/master/docs/rfcs/snippet_apps.mdx",tags:[],version:"current",frontMatter:{title:"Snippet Apps"},sidebar:"mySidebar",previous:{title:"Weekly releases",permalink:"/processes/weekly-releases"},next:{title:"Technical Overview",permalink:"/team-docs/felvin.com/overview"}},u=[{value:"End User Flow",id:"end-user-flow",children:[]},{value:"Application Developer Flow",id:"application-developer-flow",children:[]},{value:"Implementation",id:"implementation",children:[{value:"Factors",id:"factors",children:[]},{value:"High Level Overview",id:"high-level-overview",children:[]}]},{value:"Implementation (Details)",id:"implementation-details",children:[{value:"Snippet App Spec",id:"snippet-app-spec",children:[]},{value:"Snippet App DB Schema",id:"snippet-app-db-schema",children:[]},{value:"Snippet App Server",id:"snippet-app-server",children:[]},{value:"Scoring System",id:"scoring-system",children:[]}]},{value:"How will you prevent spam apps?",id:"how-will-you-prevent-spam-apps",children:[]},{value:"Can Snippet App providers use their servers to fetch data?",id:"can-snippet-app-providers-use-their-servers-to-fetch-data",children:[]},{value:"Why is a snippet app server needed?",id:"why-is-a-snippet-app-server-needed",children:[]},{value:"Can we have interactive snippet apps?",id:"can-we-have-interactive-snippet-apps",children:[]},{value:"Can we have private snippet apps?",id:"can-we-have-private-snippet-apps",children:[]},{value:"Why hasn&#39;t anyone done this before?",id:"why-hasnt-anyone-done-this-before",children:[]}],c={toc:u};function d(e){var t=e.components,n=(0,i.Z)(e,o);return(0,p.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,p.kt)("h1",{id:"what"},"What?"),(0,p.kt)("img",{width:"933",alt:"snippetApp",src:"https://user-images.githubusercontent.com/2477788/114712160-66f05080-9d4d-11eb-8554-6b41ff561e99.png"}),"Snippet Apps are the small instant answer thing which you get on the top of search. It can be football scores, stock prices or notes on a topic or anything. We are building a system where anyone can create these apps, and we'll distribute them instantly through Neera search",(0,p.kt)("h1",{id:"why"},"Why?"),(0,p.kt)("p",null,"Search is the most convenient ways to distribute apps. If you want a timer, or want to convert currency or calculator, no one install these apps, you just search them. Though the numbers and kind of apps you find in Google/Bing is still limited the bandwidth, capacity and motivation of these companies. We can do much better!"),(0,p.kt)("h1",{id:"status"},"Status"),(0,p.kt)("p",null,"In Progress (as of 15th July 2021)"),(0,p.kt)("h1",{id:"how"},"How?"),(0,p.kt)("h2",{id:"end-user-flow"},"End User Flow"),(0,p.kt)("p",null,"Same as your current experience:"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},'Step 1: You type in the app you want, say "5 minutes timer"'),(0,p.kt)("li",{parentName:"ul"},"Step 2: The app will appear, timer in this case. Then you use the app.\nIn addition, you will be able to rate the application, and will be able to forever hide some applications.")),(0,p.kt)("h2",{id:"application-developer-flow"},"Application Developer Flow"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"Step 1: You decide what app to create. (Will talk about details of this later)"),(0,p.kt)("li",{parentName:"ul"},"Step 2: You submit the app to our app store."),(0,p.kt)("li",{parentName:"ul"},"Step 3: Your app is visible to the world, anyone can start using it instantly."),(0,p.kt)("li",{parentName:"ul"},"Step 4: You make improvements to your app so that lots of people use it, then you make money as we share a part of the ad revenue.")),(0,p.kt)("h2",{id:"implementation"},"Implementation"),(0,p.kt)("h3",{id:"factors"},"Factors"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"The snippet apps should load fast for the end user"),(0,p.kt)("li",{parentName:"ul"},"We want flexibility in determining which apps should be visible to the end user"),(0,p.kt)("li",{parentName:"ul"},"The development + publishing cycle for the app developer should be as small as possible"),(0,p.kt)("li",{parentName:"ul"},"Right now we are building for ~100 snippet apps, but the system should be flexible enough for us to upgrade it to support 10K snippet apps.")),(0,p.kt)("h3",{id:"high-level-overview"},"High Level Overview"),(0,p.kt)("p",null,"Each app consists of a ",(0,p.kt)("inlineCode",{parentName:"p"},"queryToData")," function and a ",(0,p.kt)("inlineCode",{parentName:"p"},"renderer"),". ",(0,p.kt)("inlineCode",{parentName:"p"},"queryToData")," takes in the user query, and produces the data we want to display in the snippet app.\n",(0,p.kt)("inlineCode",{parentName:"p"},"renderer"),' defines the react component which will display the data. For example, in a dictionary app, the query can be "serendipity meaning", ',(0,p.kt)("inlineCode",{parentName:"p"},"queryToData")," will return a json with meaning and other data, and ",(0,p.kt)("inlineCode",{parentName:"p"},"renderer")," is used to render it."),(0,p.kt)("img",{alt:"architecture",src:r}),(0,p.kt)("p",null,"How will this work (end user flow):"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Step 1:")," Take the query, pass it to all registered snippet apps."),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Step 2:")," Process the ",(0,p.kt)("inlineCode",{parentName:"p"},"queryToData")," functions parallely."),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Step 3:"),' For all the apps which returned data, pass them into "scorer and ranker"'),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Step 4:"),' The "Scorer and Ranker" returns one snippet app. Factors which can be used in ranking, popularity of the plugin, query, user preference and bundle size of renderer.'),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Step 5:")," Take the renderer of this snippet app, and pass it back to the frontend for rendering."),(0,p.kt)("p",null,"Steps 2 to 4 happens on the server. If the app returns no data, then it means it has nothing to render."),(0,p.kt)("p",null,"How will this work (developer flow):"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Step 1:")," Developer creates the snippet app. (Will need to write tools for them to test out the snippet apps locally)"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Step 2:")," They submit the app on through our web form or cli tools"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Step 3:")," We take the package, compile it, optimize the code (maybe) and put it in the DB."),(0,p.kt)("h2",{id:"implementation-details"},"Implementation (Details)"),(0,p.kt)("h3",{id:"snippet-app-spec"},"Snippet App Spec"),(0,p.kt)("p",null,"Each snippet app will be a javascript/node package. The index.js should export an object with following keys:"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"name")," : String"),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"Description"),": String"),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"queryToData"),": Function ",(0,p.kt)("inlineCode",{parentName:"li"},"{query, options} => Object"),", query is a string passed from the main Neera application, additional parameters will be in options. In the first implementation ",(0,p.kt)("inlineCode",{parentName:"li"},"options")," are empty, any new parameter along with query will go into this. The output can be any serializable javascript object."),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"renderer"),": A react component, the output of ",(0,p.kt)("inlineCode",{parentName:"li"},"queryToData")," will be passed to this.")),(0,p.kt)("h3",{id:"snippet-app-db-schema"},"Snippet App DB Schema"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"name")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"Description")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"publishedDate")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"ratings"),": (will implement later)"),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"author")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"queryToData")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("inlineCode",{parentName:"li"},"renderer"))),(0,p.kt)("h3",{id:"snippet-app-server"},"Snippet App Server"),(0,p.kt)("p",null,"TBH I am not super sure about the details here, will know by coding. We know we can take the code from DB and execute it on the server. We also know that it is possible to generate the react components on the server and push it on the client. If you can point us to specific tools or some reference implementation, that will be great!"),(0,p.kt)("h3",{id:"scoring-system"},"Scoring System"),(0,p.kt)("p",null,"Doesn't need to be fancy. Right now we'll some simple static value for each App, will add more parameters later.\nScoring allows us to be very flexibile with what we show to the user, the parameters in the algorithm can be rating of the app, how recently was is published, how many people used it, how fast is it and tons of other things."),(0,p.kt)("h1",{id:"faq"},"FAQ?"),(0,p.kt)("h2",{id:"how-will-you-prevent-spam-apps"},"How will you prevent spam apps?"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"We'll make sure they appear only to a small set of people. In this period, this small set of people will have a chance to to downvote the app. If the app is downvoted, they won't turn up for other people."),(0,p.kt)("li",{parentName:"ul"},"How to ensure an snippet app appears only for small set of people? We can have a beta tester program, in start, the team can manually test out all snippet app submissions. If the spammers are persistent, we'll figure something out.")),(0,p.kt)("h2",{id:"can-snippet-app-providers-use-their-servers-to-fetch-data"},"Can Snippet App providers use their servers to fetch data?"),(0,p.kt)("p",null,"Yes, the ",(0,p.kt)("inlineCode",{parentName:"p"},"dataToQuery")," function can make external API calls!"),(0,p.kt)("h2",{id:"why-is-a-snippet-app-server-needed"},"Why is a snippet app server needed?"),(0,p.kt)("p",null,"Earlier we were loading all the snippet apps on the client side, which makes the javascript bundle really big, giving a hit to performance.\nWith a snippet app server we have option to load only the javascript which is required.\nIt also gives us option to run each snippet app in a sandboxed enviornment, giving us better security without compromising on extensibility."),(0,p.kt)("h2",{id:"can-we-have-interactive-snippet-apps"},"Can we have interactive snippet apps?"),(0,p.kt)("p",null,"Yes, the renderer function can be any valid react component, which can potentially have interactive element. Example, we have a currency conversation app where you can change the input and output currency and also the amount."),(0,p.kt)("h2",{id:"can-we-have-private-snippet-apps"},"Can we have private snippet apps?"),(0,p.kt)("p",null,"Yes it is possible to create snippet apps which load your personal or organizational data. Say a dashboard for your company. We'll need to add fields in the snippet app database to to check for authorization, but it will be possible to extend the same design for private apps."),(0,p.kt)("h2",{id:"why-hasnt-anyone-done-this-before"},"Why hasn't anyone done this before?"),(0,p.kt)("p",null,"I don't know! Same thing can you say with anything new. Also the tech part here is non trivial, so there are actually very few people in the world who can do this."))}d.isMDXComponent=!0}}]);